import './polyfills.server.mjs';
import{Aa as R,Eb as O,Fa as j,Ga as T,Gb as k,Kb as _,Lb as S,Q as y,W as g,Wa as b,a as C,da as x,eb as E,l,nb as P,ob as I,p as a,pa as c,qa as s,sa as w,ta as M,u as d,v as f,wa as h,y as v,za as u}from"./chunk-43FWLFEJ.mjs";var m=class n{title="Modal";showConfirm=!1;confirmText="Confirm";modalService;#e=a(p);close(){this.#e.close()}confirm(){this.#e.confirm()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=g({type:n,selectors:[["app-modal"]],inputs:{title:"title",showConfirm:"showConfirm",confirmText:"confirmText"},decls:11,vars:3,consts:[["dynamicContent",""],[1,"modal-overlay"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"]],template:function(t,o){if(t&1){let r=M();c(0,"div",1)(1,"div",2),h("click",function(H){return d(r),f(H.stopPropagation())}),c(2,"div",3)(3,"h2"),u(4),j(5,"translate"),s(),c(6,"button",4),h("click",function(){return d(r),f(o.close())}),u(7,"\xD7"),s()(),c(8,"div",5),w(9,null,0),s()()()}t&2&&(y(4),R(T(5,1,o.title)))},dependencies:[E,S,_],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 4px 20px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:16px}.modal-footer[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:8px}"]})};var p=class n{componentRef=null;container=null;#e=a(v);#t=a(x);createContainer(){let e=document.createElement("div");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="9999",document.body.appendChild(e),e}open(e){return this.close(),this.container=this.createContainer(),this.componentRef=b(m,{environmentInjector:this.#e,hostElement:this.container}),this.#t.attachView(this.componentRef.hostView),Object.assign(this.componentRef.instance,e||{}),this.componentRef.instance.modalService=this,e?.component&&this.injectComponentIntoModal(e.component,e.componentInputs),this.componentRef}injectComponentIntoModal(e,t){if(!this.componentRef)return;let o=this.componentRef.location.nativeElement.querySelector(".modal-body");if(!o)return;o.innerHTML="";let r=b(e,{environmentInjector:this.#e,hostElement:o});t&&Object.keys(t).forEach(i=>{r.setInput(i,t[i])}),this.#t.attachView(r.hostView)}close(){this.componentRef&&(this.#t.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.componentRef=null),this.container&&this.container.parentNode&&(this.container.parentNode.removeChild(this.container),this.container=null)}confirm(){return this.componentRef?(this.close(),!0):!1}static \u0275fac=function(t){return new(t||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};var L=class n{#e=a(k);#t=a(I);apiUrl;constructor(){this.apiUrl=O.be}getTemplates(){return this.#e.get("protocols/templates")}createTemplate(e){return this.#e.post("protocols/templates",e)}generateProtocol(e){return this.#t.post(`${this.apiUrl}/protocols/generate`,e,{headers:new P({"Content-Type":"application/json"}),responseType:"blob"})}downloadProtocol(e){return new C(t=>{this.generateProtocol(e).subscribe({next:o=>{let r=window.URL.createObjectURL(o),i=document.createElement("a");i.href=r,i.download=`protocol_${Date.now()}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r),t.next(),t.complete()},error:o=>{console.error("Failed to generate protocol:",o),t.error(o)}})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};export{p as a,L as b};
